<!-- src/app/components/admin/dashboard/dashboard.component.html -->
<div class="dashboard-container">
  <div class="dashboard-header">
    <svg class="header-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="3" width="7" height="7"/>
      <rect x="14" y="3" width="7" height="7"/>
      <rect x="14" y="14" width="7" height="7"/>
      <rect x="3" y="14" width="7" height="7"/>
    </svg>
    <h1>Dashboard Admin</h1>
    <p>Vue d'ensemble de votre boutique de miel</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Chargement des données...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-error">
    {{ errorMessage }}
  </div>

  <!-- Stats Cards -->
  <div *ngIf="!loading" class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon orders">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"/>
          <circle cx="20" cy="21" r="1"/>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
        </svg>
      </div>
      <div class="stat-info">
        <h3>{{ stats.totalOrders }}</h3>
        <p>Commandes totales</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon revenue">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="1" x2="12" y2="23"/>
          <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
        </svg>
      </div>
      <div class="stat-info">
        <h3>{{ formatCurrency(stats.totalRevenue) }}</h3>
        <p>Chiffre d'affaires</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon customers">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
      </div>
      <div class="stat-info">
        <h3>{{ stats.totalCustomers }}</h3>
        <p>Clients</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon products">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
          <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
          <line x1="12" y1="22.08" x2="12" y2="12"/>
        </svg>
      </div>
      <div class="stat-info">
        <h3>{{ stats.totalProducts }}</h3>
        <p>Produits</p>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div *ngIf="!loading" class="quick-actions">
    <h2>
      <svg class="section-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
      </svg>
      Actions Rapides
    </h2>
    <div class="actions-grid">
      <a routerLink="/admin/orders" class="action-card">
        <div class="action-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10 9 9 9 8 9"/>
          </svg>
        </div>
        <h3>Gérer les Commandes</h3>
        <p>Voir et traiter les commandes</p>
      </a>

      <a routerLink="/admin/products" class="action-card">
        <div class="action-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
            <path d="M2 17l10 5 10-5"/>
            <path d="M2 12l10 5 10-5"/>
          </svg>
        </div>
        <h3>Gérer les Produits</h3>
        <p>Ajouter ou modifier des produits</p>
      </a>

      <a routerLink="/admin/categories" class="action-card">
        <div class="action-icon categories">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
          </svg>
        </div>
        <h3>Gérer les Catégories</h3>
        <p>Organiser les produits par catégorie</p>
      </a>

      <a routerLink="/admin/users" class="action-card">
        <div class="action-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
        </div>
        <h3>Gérer les Utilisateurs</h3>
        <p>Gérer les rôles et permissions</p>
      </a>

      <a routerLink="/admin/reports" class="action-card">
        <div class="action-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="20" x2="18" y2="10"/>
            <line x1="12" y1="20" x2="12" y2="4"/>
            <line x1="6" y1="20" x2="6" y2="14"/>
          </svg>
        </div>
        <h3>Rapports</h3>
        <p>Voir les statistiques détaillées</p>
      </a>
    </div>
  </div>

  <!-- Recent Orders & Top Products -->
  <div *ngIf="!loading" class="dashboard-content">
    <!-- Recent Orders -->
    <div class="section-card">
      <div class="section-header">
        <h2>
          <svg class="section-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
          Commandes Récentes
        </h2>
        <a routerLink="/admin/orders" class="view-all">Voir tout →</a>
      </div>

      <div class="table-responsive">
        <table class="data-table">
          <thead>
            <tr>
              <th>#ID</th>
              <th>Client</th>
              <th>Montant</th>
              <th>Statut</th>
              <th>Date</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let order of recentOrders">
              <td>#{{ order.orderId }}</td>
              <td>{{ order.customerName }}</td>
              <td>{{ formatCurrency(order.totalAmount) }}</td>
              <td>
                <span [class]="'status-badge ' + getStatusClass(order.status)">
                  {{ order.status }}
                </span>
              </td>
              <td>{{ formatDate(order.orderDate) }}</td>
            </tr>
          </tbody>
        </table>

        <div *ngIf="recentOrders.length === 0" class="no-data">
          Aucune commande récente
        </div>
      </div>
    </div>

    <!-- Top Products -->
    <div class="section-card">
      <div class="section-header">
        <h2>
          <svg class="section-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
          </svg>
          Produits les Plus Vendus
        </h2>
        <a routerLink="/admin/products" class="view-all">Gérer produits →</a>
      </div>

      <div class="table-responsive">
        <table class="data-table">
          <thead>
            <tr>
              <th>#ID</th>
              <th>Produit</th>
              <th>Quantité Vendue</th>
              <th>Revenu</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let product of topProducts">
              <td>#{{ product.productId }}</td>
              <td>{{ product.productName }}</td>
              <td>{{ product.totalSold }} unités</td>
              <td>{{ formatCurrency(product.revenue) }}</td>
            </tr>
          </tbody>
        </table>

        <div *ngIf="topProducts.length === 0" class="no-data">
          Aucun produit vendu pour le moment
        </div>
      </div>
    </div>
  </div>
</div>